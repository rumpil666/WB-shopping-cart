(()=>{"use strict";var t="";const e=t+"images/Img1.6a2dce76be3cbdef8e0b.png",n=t+"images/img2.2e27117ed0af979fcbc9.png",o=t+"images/img3.920a2f02a9ba5a0eed9d.png";var i=[{name:"Футболка UZcotton мужская",link:"".concat(e),color:"белый",size:"56",warehouses:[{warehouse:"Коледино WB",quantity:"100",deliveryTime:6}],company:"OOO Вайлдберриз",ogrn:"ОГРН: 5167746237148",address:"129337, Москва, улица Красная Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",price:"1573",discount:"50",quantity:"10",maxQuantity:"",quantityWarehouse:"",deliveryTime:"",id:"1"},{name:"Силиконовый чехол картхолдер (отверстия) для карт, прозрачный кейс бампер на Apple iPhone XR, MobiSafe",link:"".concat(n),color:"прозрачный",size:"",warehouses:[{warehouse:"Коледино WB",quantity:"40",deliveryTime:4},{warehouse:"Москвино",quantity:"10",deliveryTime:2}],company:"OOO Мегапрофстиль",ogrn:"ОГРН: 5167746237148",address:"129337, Москва, улица Красная Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",price:"22000",discount:"50",quantity:"15",maxQuantity:"",quantityWarehouse:"",deliveryTime:"",id:"2"},{name:'Карандаши цветные Faber-Castell "Замок", набор 24 цвета, заточенные, шестигранные, Faber-Castell',link:"".concat(o),color:"",size:"",warehouses:[{warehouse:"Коледино WB",quantity:"20",deliveryTime:2}],company:"OOO Вайлдберриз",ogrn:"ОГРН: 5167747123131",address:"129337, Москва, улица Кукушкина Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",price:"722",discount:"50",quantity:"2",maxQuantity:"",quantityWarehouse:"",deliveryTime:"",id:"3"},{name:"Футболка UZcotton мужская",link:"".concat(e),color:"белый",size:"56",warehouses:[{warehouse:"Коледино WB",quantity:"0"},{warehouse:"Москвино",quantity:"0"}],company:"OOO Вайлдберриз",ogrn:"ОГРН: 5167746237148",address:"129337, Москва, улица Красная Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",price:"67",discount:"50",quantity:"20",maxQuantity:"",quantityWarehouse:"",deliveryTime:"",id:"4"},{name:"Силиконовый чехол картхолдер (отверстия) для карт, прозрачный кейс бампер на Apple iPhone XR, MobiSafe",link:"".concat(n),color:"прозрачный",size:"",warehouses:[{warehouse:"Коледино WB",quantity:"0"},{warehouse:"Москвино",quantity:"0"}],company:"OOO Мегапрофстиль",ogrn:"ОГРН: 5167746237148",address:"129337, Москва, улица Красная Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",price:"412",discount:"50",quantity:"60",maxQuantity:"",quantityWarehouse:"",deliveryTime:"",id:"5"},{name:'Карандаши цветные Faber-Castell "Замок", набор 24 цвета, заточенные, шестигранные, Faber-Castell',link:"".concat(o),color:"",size:"",warehouses:[{warehouse:"Коледино WB",quantity:"0"},{warehouse:"Москвино",quantity:"0"}],company:"OOO Вайлдберриз",ogrn:"ОГРН: 5167747123131",address:"129337, Москва, улица Кукушкина Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",price:"234",discount:"50",quantity:"10",maxQuantity:"",quantityWarehouse:"",deliveryTime:"",id:"6"},{name:'Карандаши цветные Faber-Castell "Замок", набор 24 цвета, заточенные, шестигранные, Faber-Castell',link:"".concat(o),color:"",size:"",warehouses:[{warehouse:"Коледино WB",quantity:"0"},{warehouse:"Москвино",quantity:"0"}],company:"OOO Вайлдберриз",ogrn:"ОГРН: 5167747123131",address:"129337, Москва, улица Кукушкина Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",price:"2345",discount:"50",quantity:"28",maxQuantity:"",quantityWarehouse:"",deliveryTime:"",id:"7"}],r={personalDiscount:"10"};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===u(i)?i:String(i)),o)}var i}var s=function(){function t(e){var n=e.data,o=e.user,i=e.templateSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n.name,this._link=n.link,this.test1=n,this._color=n.color,this._size=n.size,this._warehouses=n.warehouses,this._company=n.company,this._ogrn=n.ogrn,this._address=n.address,this._id=n.id,this._discount=n.discount,this._price=n.price,this._quantity=n.quantity,this._userDiscount=o.personalDiscount,this._templateSelector=i}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return this._product=document.querySelector(this._templateSelector).content.querySelector(".item").cloneNode(!0),this._product}},{key:"generateProduct",value:function(){return this._element=this._getTemplate(),this._image=this._element.querySelector(".item__img"),this._inputCheckbox=this._element.querySelector("input"),this._label=this._element.querySelector("label"),this._allCheckbox=document.querySelector(".checkbox__all"),this._totalTitle=document.querySelector(".basket-list__total"),this._priceHover=this._element.querySelector(".basket-list__price_subtitle"),this._tooltipDiscount=this._element.querySelector(".tooltip__discount"),this._likeButton=this._element.querySelector(".button__like"),this._deleteButton=this._element.querySelector(".button__delete"),this._minusButton=this._element.querySelector(".basket-list__minus"),this._plusButton=this._element.querySelector(".basket-list__plus"),this._infoHover=this._element.querySelector(".item__icon-info"),this._tooltipInfo=this._element.querySelector(".tooltip__info"),this._inputNumber=this._element.querySelector(".basket-list__input"),this._priceProduct=this._element.querySelector(".basket-list__price_title"),this._amountDiscountWhole=this._element.querySelector(".amount__discount-whole"),this._amountDiscount=this._element.querySelector(".amount__discount"),this._amountPersonalDiscount=this._element.querySelector(".amount__personal-discount"),this._remainingQuantity=this._element.querySelector(".basket-list__span"),this._sidebarTotal=document.querySelector(".sidebar-total__subtitle"),this._quantityProductSidebar=document.querySelector(".quantity__product"),this._priceNoDiscountSidebar=document.querySelector(".price-no-discount"),this._discountSidebar=document.querySelector(".discount"),this._spanBasket=document.querySelector(".header__icon--span"),this._spanBasketTabbar=document.querySelector(".tabbar__span"),this._buttonOrder=document.querySelector(".button__sidebar-confirmation"),this._checkboxBuy=document.querySelector(".checkbox--buy"),this._paymentTextHide=document.querySelector(".sidebar-payment__text"),this._image.src=this._link,this._image.alt=this._name,this._inputCheckbox.checked=!0,this._plusButton.id=this._id,this._minusButton.id=this._id,this._inputCheckbox.id=this._id,this._deleteButton.id=this._id,this._label.setAttribute("for",this._id),this._inputNumber.value=this._quantity,this._element.querySelector(".item__title").textContent=this._name,this._element.querySelector(".item__color").textContent=this._isEmptyColor(),this._element.querySelector(".item__size").textContent=this._isEmptySize(),this._element.querySelector(".item__span-size").textContent=this._size,this._element.querySelector(".item__warehouse").textContent=this._warehouses[0].warehouse,this._element.querySelector(".item__company").textContent=this._company,this._element.querySelector(".item__company-info").textContent=this._company,this._element.querySelector(".item__ogrn").textContent=this._ogrn,this._element.querySelector(".item__address").textContent=this._address,this._inputCheckbox.value=this._countPrice(),this._inputNumber.classList.add("basket-list__input_".concat(this._id)),this._priceProduct.textContent=this._modifyNumber(String(this._countPrice())),this._element.querySelector(".tooltip__discount-user").textContent="Скидка покупателя ".concat(this._userDiscount,"%"),this._element.querySelector(".tooltip__discount-product").textContent="Скидка ".concat(this._discount,"%"),this._amountDiscountWhole.textContent="".concat(this._modifyNumber(String(this._countWholeDiscount()))," сом"),this._amountDiscount.textContent="-".concat(this._modifyNumber(String(this._countAmountDiscount()))," сом"),this._amountPersonalDiscount.textContent="-".concat(this._modifyNumber(String(this._countAmountPersonalDiscount()))," сом"),this._remainingQuantity.textContent="Осталось ".concat(this._countRemainingQuantity()," шт."),this._toogleDisabledCountBtn(),this._toogleRemainingQuantityDisable(),this._setEventListeners(),this._toogleFont(),this._checkChecked(),this._element}},{key:"_modifyNumber",value:function(t){return t.replace(/(?=(?:.{3})*$)/g," ")}},{key:"_countAmountDiscount",value:function(){return Math.trunc(this._price/100*this._discount)*this._inputNumber.value}},{key:"_countAmountPersonalDiscount",value:function(){return Math.trunc(this._price/100*this._userDiscount)*this._inputNumber.value}},{key:"_countWholeDiscount",value:function(){return Math.trunc(this._countAmountDiscount()+this._countAmountPersonalDiscount())}},{key:"_countPrice",value:function(){return"".concat(Math.trunc(this._price*this._inputNumber.value-this._countWholeDiscount()))}},{key:"_countNumberofProduct",value:function(){return this._warehouses.reduce((function(t,e){return t+Number(e.quantity)}),0)}},{key:"_countRemainingQuantity",value:function(){return this._countNumberofProduct()-this._quantity}},{key:"_toogleRemainingQuantityDisable",value:function(){this._countRemainingQuantity()>=5?this._remainingQuantity.classList.add("basket-list__span--disable"):this._remainingQuantity.classList.remove("basket-list__span--disable")}},{key:"_toogleDisabledCountBtn",value:function(){1==this._quantity?this._minusButton.setAttribute("disabled",!0):this._quantity==this._countNumberofProduct()?this._plusButton.setAttribute("disabled",!0):(this._minusButton.removeAttribute("disabled"),this._plusButton.removeAttribute("disabled"))}},{key:"_toogleFont",value:function(){this._countPrice().length>5?this._priceProduct.classList.add("basket-list__price_title--font-size"):this._priceProduct.classList.remove("basket-list__price_title--font-size")}},{key:"_toogleAllCheckbox",value:function(){for(var t=document.getElementsByClassName("checkbox--item"),e=0;e<t.length;e++)t[e].checked=this._allCheckbox.checked}},{key:"_deleteProduct",value:function(){this._element.remove(),this._element=null}},{key:"_likeProduct",value:function(){this._likeButton.classList.toggle("button__like--active")}},{key:"_isEmptyColor",value:function(){return 0==this._color?"":"Цвет: ".concat(this._color)}},{key:"_isEmptySize",value:function(){return 0==this._size?"":"Размер: ".concat(this._size)}},{key:"_plusProduct",value:function(){return this._quantity++,this._inputNumber.value=this._quantity}},{key:"_minusProduct",value:function(){return this._quantity--,this._inputNumber.value=this._quantity}},{key:"_countValueCheckedCheckBoxes",value:function(t){for(var e=document.getElementsByClassName("checkbox--item"),n=document.getElementsByClassName(t),o="",i=0;i<e.length;i++)o=e[i].checked?""===n[i].textContent?Number(o)+Number(n[i].value.replace(/[^+\d]/g,"")):Number(o)+Number(n[i].textContent.replace(/[^+\d]/g,"")):Number(o);return o}},{key:"_countPriceNoDiscountSidebar",value:function(){return this._countValueCheckedCheckBoxes("basket-list__price_title")+this._countValueCheckedCheckBoxes("basket-list__price_subtitle")}},{key:"_productTitle",value:function(t){if(t>10&&[11,12,13,14].includes(t%100))return"".concat(t," товаров");var e=t%10;return 1==e?"".concat(t," товар"):[2,3,4].includes(e)?"".concat(t," товара"):[5,6,7,8,9,0].includes(e)?"".concat(t," товаров"):void 0}},{key:"_checkChecked",value:function(){for(var t=document.getElementsByClassName("checkbox--item"),e=!0,n=0;n<t.length;n++)!1===t[n].checked&&(e=!1);return this._allCheckbox.checked=e}},{key:"_toggleCheckboxBuy",value:function(){!0===this._checkboxBuy.checked?(this._paymentTextHide.classList.add("sidebar-payment__text--hide"),this._buttonOrder.textContent="Оплатить ".concat(this._sidebarTotal.textContent)):(this._buttonOrder.textContent="Заказать",this._paymentTextHide.classList.remove("sidebar-payment__text--hide"))}},{key:"_setEventListeners",value:function(){var t=this;this._deleteButton.addEventListener("click",(function(){t._deleteProduct(),t._sidebarTotal.textContent="".concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_title")))," сом"),t._discountSidebar.textContent="−".concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_subtitle")))," сом"),t._priceNoDiscountSidebar.textContent="".concat(t._modifyNumber(String(t._countPriceNoDiscountSidebar()))," сом"),t._quantityProductSidebar.textContent="".concat(t._productTitle(t._countValueCheckedCheckBoxes("basket-list__input"))),t._spanBasket.textContent=t._countValueCheckedCheckBoxes("basket-list__input"),t._spanBasketTabbar.textContent=t._countValueCheckedCheckBoxes("basket-list__input"),t._totalTitle.textContent="".concat(t._productTitle(t._countValueCheckedCheckBoxes("basket-list__input"))," · ").concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_title")))," сом"),t._toggleCheckboxBuy()})),this._likeButton.addEventListener("click",(function(){t._likeProduct()})),this._inputCheckbox.addEventListener("click",(function(){t._sidebarTotal.textContent="".concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_title")))," сом"),t._discountSidebar.textContent="−".concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_subtitle")))," сом"),t._priceNoDiscountSidebar.textContent="".concat(t._modifyNumber(String(t._countPriceNoDiscountSidebar()))," сом"),t._quantityProductSidebar.textContent="".concat(t._productTitle(t._countValueCheckedCheckBoxes("basket-list__input"))),t._spanBasket.textContent=t._countValueCheckedCheckBoxes("basket-list__input"),t._spanBasketTabbar.textContent=t._countValueCheckedCheckBoxes("basket-list__input"),t._checkChecked(),t._toggleCheckboxBuy()})),this._checkboxBuy.addEventListener("click",(function(){t._toggleCheckboxBuy()})),this._allCheckbox.addEventListener("click",(function(){t._toogleAllCheckbox(),t._sidebarTotal.textContent="".concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_title")))," сом"),t._discountSidebar.textContent="−".concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_subtitle")))," сом"),t._priceNoDiscountSidebar.textContent="".concat(t._modifyNumber(String(t._countPriceNoDiscountSidebar()))," сом"),t._quantityProductSidebar.textContent="".concat(t._productTitle(t._countValueCheckedCheckBoxes("basket-list__input"))),t._spanBasket.textContent=t._countValueCheckedCheckBoxes("basket-list__input"),t._spanBasketTabbar.textContent=t._countValueCheckedCheckBoxes("basket-list__input"),t._toggleCheckboxBuy()})),this._plusButton.addEventListener("click",(function(){t._plusProduct(),t._priceProduct.textContent=t._modifyNumber(String(t._countPrice())),t._amountDiscountWhole.textContent="".concat(t._modifyNumber(String(t._countWholeDiscount()))," сом"),t._amountDiscount.textContent="-".concat(t._modifyNumber(String(t._countAmountDiscount()))," сом"),t._amountPersonalDiscount.textContent="-".concat(t._modifyNumber(String(t._countAmountPersonalDiscount()))," сом"),t._remainingQuantity.textContent="Осталось ".concat(t._countRemainingQuantity()," шт."),t._toogleRemainingQuantityDisable(),t._toogleDisabledCountBtn(),t._toogleFont(),t._sidebarTotal.textContent="".concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_title")))," сом"),t._discountSidebar.textContent="−".concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_subtitle")))," сом"),t._priceNoDiscountSidebar.textContent="".concat(t._modifyNumber(String(t._countPriceNoDiscountSidebar()))," сом"),t._quantityProductSidebar.textContent="".concat(t._productTitle(t._countValueCheckedCheckBoxes("basket-list__input"))),t._spanBasket.textContent=t._countValueCheckedCheckBoxes("basket-list__input"),t._spanBasketTabbar.textContent=t._countValueCheckedCheckBoxes("basket-list__input"),t._inputCheckbox.value=t._countPrice(),t._totalTitle.textContent="".concat(t._productTitle(t._countValueCheckedCheckBoxes("basket-list__input"))," · ").concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_title")))," сом"),t._toggleCheckboxBuy()})),this._minusButton.addEventListener("click",(function(){t._minusProduct(),t._priceProduct.textContent=t._modifyNumber(String(t._countPrice())),t._amountDiscountWhole.textContent="".concat(t._modifyNumber(String(t._countWholeDiscount()))," сом"),t._amountDiscount.textContent="-".concat(t._modifyNumber(String(t._countAmountDiscount()))," сом"),t._amountPersonalDiscount.textContent="-".concat(t._modifyNumber(String(t._countAmountPersonalDiscount()))," сом"),t._remainingQuantity.textContent="Осталось ".concat(t._countRemainingQuantity()," шт."),t._toogleRemainingQuantityDisable(),t._toogleDisabledCountBtn(),t._toogleFont(),t._sidebarTotal.textContent="".concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_title")))," сом"),t._discountSidebar.textContent="−".concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_subtitle")))," сом"),t._priceNoDiscountSidebar.textContent="".concat(t._modifyNumber(String(t._countPriceNoDiscountSidebar()))," сом"),t._quantityProductSidebar.textContent="".concat(t._productTitle(t._countValueCheckedCheckBoxes("basket-list__input"))),t._spanBasket.textContent=t._countValueCheckedCheckBoxes("basket-list__input"),t._spanBasketTabbar.textContent=t._countValueCheckedCheckBoxes("basket-list__input"),t._inputCheckbox.value=t._countPrice(),t._totalTitle.textContent="".concat(t._productTitle(t._countValueCheckedCheckBoxes("basket-list__input"))," · ").concat(t._modifyNumber(String(t._countValueCheckedCheckBoxes("basket-list__price_title")))," сом"),t._toggleCheckboxBuy()})),this._priceHover.addEventListener("mouseover",(function(){t._tooltipDiscount.classList.add("tooltip_opened")})),this._priceHover.addEventListener("mouseout",(function(){t._tooltipDiscount.classList.remove("tooltip_opened")})),this._infoHover.addEventListener("mouseover",(function(){t._tooltipInfo.classList.add("tooltip_opened")})),this._infoHover.addEventListener("mouseout",(function(){t._tooltipInfo.classList.remove("tooltip_opened")}))}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===a(i)?i:String(i)),o)}var i}var _=function(){function t(e){var n=e.data,o=e.templateSelector,i=e.quantity;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n.name,this._link=n.link,this._quantity=i,this._color=n.color,this._size=n.size,this._templateSelector=o}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return this._product=document.querySelector(this._templateSelector).content.querySelector(".item").cloneNode(!0),this._product}},{key:"generateProductIsMissing",value:function(){return this._element=this._getTemplate(),this._image=this._element.querySelector(".item__img"),this._likeButton=this._element.querySelector(".button__like"),this._deleteButton=this._element.querySelector(".button__delete"),this._accordionTitle=document.querySelector(".accordion__title"),this._image.src=this._link,this._image.alt=this._name,this._element.querySelector(".item__title").textContent=this._name,this._element.querySelector(".item__color").textContent=this._isEmptyColor(),this._element.querySelector(".item__size").textContent=this._isEmptySize(),this._element.querySelector(".item__span-size").textContent=this._size,this._accordionTitle.textContent=this._productTitle(this._quantity),this._setEventListeners(),this._element}},{key:"_deleteProduct",value:function(){this._element.remove(),this._element=null}},{key:"_likeProduct",value:function(){this._likeButton.classList.toggle("button__like--active")}},{key:"_isEmptyColor",value:function(){return 0==this._color?"":"Цвет: ".concat(this._color)}},{key:"_isEmptySize",value:function(){return 0==this._size?"":"Размер: ".concat(this._size)}},{key:"_productTitle",value:function(t){if(t>10&&[11,12,13,14].includes(t%100))return"Отсутствуют · ".concat(t," товаров");var e=t%10;return 1==e?"Отсутствует · ".concat(t," товар"):[2,3,4].includes(e)?"Отсутствуют · ".concat(t," товара"):[5,6,7,8,9,0].includes(e)?"Отсутствуют · ".concat(t," товаров"):void 0}},{key:"_setEventListeners",value:function(){var t=this;this._deleteButton.addEventListener("click",(function(){t._deleteProduct()})),this._likeButton.addEventListener("click",(function(){t._likeProduct()}))}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===d(i)?i:String(i)),o)}var i}var m=function(){function t(e){var n=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=n,this._renderer=o}var e,n;return e=t,(n=[{key:"addItem",value:function(t,e){e.append(t)}},{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){t._renderer(e)}))}}])&&h(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===y(i)?i:String(i)),o)}var i}var f=function(){function t(e){var n=e.data,o=e.arr,i=e.templateSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=n,this._arr=o,this._templateSelector=i}var e,n;return e=t,(n=[{key:"_getTemplateDateList",value:function(){return this._dateEl=document.querySelector(this._templateSelector).content.querySelector(".delivery__date").cloneNode(!0),this._dateEl}},{key:"_getTemplatePhoto",value:function(){return this._photo=document.querySelector("#date-photo").content.querySelector(".delivery__photo").cloneNode(!0),this._photo}},{key:"generatePhoto",value:function(t){return this._el=this._getTemplatePhoto(),this._image=this._el.querySelector(".delivery__img"),this._number=this._el.querySelector(".delivery__number"),this._image.src=t.link,this._image.alt=t.name,this._number.textContent=t.quantityWarehouse,this._el.classList.add("delivery__photo_".concat(t.id)),this._number.classList.add("photo-span_".concat(t.id)),this._number.title=t.maxQuantite,this._toggleHiddenSpan(),this._el}},{key:"_toggleHiddenSpan",value:function(){1==this._number.textContent&&this._number.classList.add("delivery__number--hidden")}},{key:"_addItem",value:function(t,e){e.append(t)}},{key:"_renderItems",value:function(t,e){var n=this;t.forEach((function(t){n._addItem(n.generatePhoto(t),e)}))}},{key:"generateDateEl",value:function(){return this._element=this._getTemplateDateList(),this._date=this._element.querySelector(".delivery__dates"),this._container=this._element.querySelector(".delivery__photos"),this._container.classList.add("delivery__photos_".concat(this._data)),this._date.textContent=this._getDateDelivery(this._data),this._photoArr=this._setDateElements(this._arr,this._data),this._renderItems(this._photoArr,this._container),this._toggleVisible(this._element),this._element}},{key:"_getMonth",value:function(t){return 0===t?"января":1===t?"февраля":2===t?"марта":3===t?"апреля":4===t?"мая":5===t?"июня":6===t?"июля":7===t?"августа":8===t?"сентября":9===t?"октября":10===t?"ноября":11===t?"декабря":void 0}},{key:"_getDateDelivery",value:function(t){var e=(new Date).getDate(),n=(new Date).getMonth(),o=(new Date).getFullYear(),i=new Date(o,n,e);i.setDate(i.getDate()+t);var r=i.getDate(),u=i.getMonth();return"".concat(r," ").concat(this._getMonth(u))}},{key:"_setDateElements",value:function(t,e){var n=[];return t.forEach((function(t){t.warehouses.forEach((function(o){if(0!=t.quantity&&0!=o.quantity&&(t.maxQuantite=o.quantity,o.deliveryTime===e))return Number(o.quantity)>=Number(t.quantity)?(t.quantityWarehouse=t.quantity,t.quantity=0):Number(o.quantity)<Number(t.quantity)&&(t.quantityWarehouse=o.quantity,t.quantity=t.quantity-o.quantity),n.push(t)}))})),n}},{key:"_toggleVisible",value:function(t){null===t.querySelector(".delivery__img")&&t.classList.add("delivery__container--hidden")}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function v(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==b(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===b(i)?i:String(i)),o)}var i}var k=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._escapeClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup--opened"),document.addEventListener("keydown",this._escapeClose)}},{key:"close",value:function(){this._popup.classList.remove("popup--opened"),document.removeEventListener("keydown",this._escapeClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup--opened")&&t.close(),e.target.classList.contains("popup__close")&&t.close()}))}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function S(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==g(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===g(i)?i:String(i)),o)}var i}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=q(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},C.apply(this,arguments)}function q(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function E(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(u,t);var e,n,o,i,r=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(o);if(i){var n=w(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return E(this,t)});function u(t){var e,n=t.popupSelector,o=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=r.call(this,n))._handleFormSubmit=o,e._popupForm=e._popup.querySelector(".popup__form"),e}return e=u,(n=[{key:"setEventListeners",value:function(){var t=this;C(w(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault();var n=document.querySelector('input[name="card"]:checked').value,o=document.querySelector('input[name="card"]:checked').id,i=document.querySelector('label[for="'.concat(o,'"] > div > img')).src,r=document.querySelector('label[for="'.concat(o,'"] > div > p')).textContent;t._handleFormSubmit(n,i,r)}))}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(k);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function B(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==P(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===P(i)?i:String(i)),o)}var i}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=N(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},D.apply(this,arguments)}function N(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function T(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(u,t);var e,n,o,i,r=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(o);if(i){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return T(this,t)});function u(t){var e,n=t.popupSelector,o=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=r.call(this,n))._handleFormSubmit=o,e._popupFormOffice=document.querySelector(".form__delivery--office"),e._popupFormMyAdress=document.querySelector(".form__delivery--my-address"),e._container=document.querySelector(".container--evaluation"),e._deleteBtn=document.querySelectorAll(".button__delete--address"),e}return e=u,(n=[{key:"_deleteProduct",value:function(t){t.target.remove(),t.target=null}},{key:"setEventListeners",value:function(){var t=this;D(j(u.prototype),"setEventListeners",this).call(this),this._deleteBtn.forEach((function(t){return t.addEventListener("click",(function(t){t.target.parentElement.remove()}))})),this._popupFormOffice.addEventListener("submit",(function(e){e.preventDefault();var n=document.querySelector('input[name="office"]:checked').value,o=document.querySelector('input[name="office"]:checked').id,i=document.querySelector('label[for="'.concat(o,'"] > div > div > div > Span')).textContent;t._container.classList.remove("delivery__container--hidden"),t._handleFormSubmit(n,"Пункт выдачи","в пункт выдачи",i)})),this._popupFormMyAdress.addEventListener("submit",(function(e){e.preventDefault();var n=document.querySelector('input[name="address"]:checked').value;t._container.classList.add("delivery__container--hidden"),t._handleFormSubmit(n,"Доставка курьером","курьером")}))}}])&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(k);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function V(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==I(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===I(i)?i:String(i)),o)}var i}var R=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._tooltip=document.querySelector(e),this._tooltipHover=document.querySelector(n)}var e,n;return e=t,(n=[{key:"open",value:function(){this._tooltip.classList.add("tooltip_opened")}},{key:"close",value:function(){this._tooltip.classList.remove("tooltip_opened")}},{key:"setEventListenersOpen",value:function(){var t=this;this._tooltipHover.addEventListener("mouseover",(function(){t.open()}))}},{key:"setEventListenersClose",value:function(){var t=this;this._tooltipHover.addEventListener("mouseout",(function(){t.close()}))}}])&&V(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==F(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==F(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===F(i)?i:String(i)),o)}var i}var W=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._settings=e,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.formInput)),this._buttonElement=document.querySelector(this._settings.formSubmit)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._settings.inputErrorClass),n.textContent=e,n.classList.add(this._settings.inputErrorClass),n.classList.add(this._settings.inputErrorActive)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._settings.inputErrorClass),e.classList.remove(this._settings.inputErrorActive),e.textContent=""}},{key:"_checkInputValidityEmptyFieldError",value:function(t){console.log(window.screen.width),window.screen.width<=550&&""===t.value&&"firstname-input"===t.id&&(t.focus(),this._showInputError(t,"Укажите имя")),window.screen.width<=550&&""===t.value&&"lastname-input"===t.id&&(t.focus(),this._showInputError(t,"Введите фамилию")),window.screen.width<=550&&""===t.value&&"email-input"===t.id&&(t.focus(),this._showInputError(t,"Укажите электронную почту")),window.screen.width<=550&&""===t.value&&"phone-input"===t.id&&(t.focus(),this._showInputError(t,"Укажите номер телефона")),window.screen.width<=550&&""===t.value&&"inn-input"===t.id&&(t.focus(),this._showInputError(t,"Укажите ИНН")),""===t.value&&"firstname-input"===t.id&&this._showInputError(t,"Укажите имя"),""===t.value&&"lastname-input"===t.id&&this._showInputError(t,"Введите фамилию"),""===t.value&&"email-input"===t.id&&this._showInputError(t,"Укажите электронную почту"),""===t.value&&"phone-input"===t.id&&this._showInputError(t,"Укажите номер телефона"),""===t.value&&"inn-input"===t.id&&this._showInputError(t,"Укажите ИНН")}},{key:"_checkInputValidityError",value:function(t){"firstname-input"===t.id&&35===t.validationMessage.length&&this._showInputError(t,"Имя содержит запрещенные символы"),35===t.validationMessage.length&&"lastname-input"===t.id&&this._showInputError(t,"Фамилия содержит запрещенные символы"),35===t.validationMessage.length&&"email-input"===t.id&&this._showInputError(t,"Проверьте адрес электронной почты"),35===t.validationMessage.length&&"phone-input"===t.id&&this._showInputError(t,"Формат: +9 999 999 99 99"),t.validationMessage!=="Минимальное количество символов: 14. Длина текста сейчас: ".concat(t.value.length,".")&&35!==t.validationMessage.length||"inn-input"!==t.id||this._showInputError(t,"Проверьте ИНН")}},{key:"_checkInputValidityValid",value:function(t){t.validity.valid&&this._hideInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){t._buttonElement.addEventListener("click",(function(){t._checkInputValidityEmptyFieldError(e)})),e.addEventListener("change",(function(){t._checkInputValidityError(e)})),e.addEventListener("input",(function(){t._checkInputValidityValid(e)}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&z(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Q=new R(".tooltip__refund-sidebar",".sidebar-delivery__text--span"),M=new R(".tooltip__refund",".delivery__refund--span"),H=i.filter((function(t){return 0!=t.warehouses.reduce((function(t,e){return t+Number(e.quantity)}),0)})),$=i.filter((function(t){return 0===t.warehouses.reduce((function(t,e){return t+Number(e.quantity)}),0)}));Q.setEventListenersOpen(),Q.setEventListenersClose(),M.setEventListenersOpen(),M.setEventListenersClose();var U,X=new Set(function(t){return t.sort((function(t,e){return t-e}))}((U=[],H.forEach((function(t){t.warehouses.forEach((function(t){return U.push(t.deliveryTime)}))})),U))),Z=new m({items:H,renderer:function(t){Z.addItem(new s({data:t,user:r,templateSelector:"#product-template"}).generateProduct(),document.querySelector(".product-list"))}}),Y=new m({items:$,renderer:function(t){Y.addItem(new _({data:t,quantity:$.length,templateSelector:"#product-is-missing-template"}).generateProductIsMissing(),document.querySelector(".product-list--sold-out"))}}),G=new m({items:X,renderer:function(t){G.addItem(new f({data:t,arr:H,templateSelector:"#date-list"}).generateDateEl(),document.querySelector(".delivery__data-list"))}});function J(t){for(var e=document.getElementsByClassName("checkbox--item"),n=document.getElementsByClassName(t),o="",i=0;i<e.length;i++)o=e[i].checked?""===n[i].textContent?Number(o)+Number(n[i].value.replace(/[^+\d]/g,"")):Number(o)+Number(n[i].textContent.replace(/[^+\d]/g,"")):Number(o);return o}Y.renderItems(),Z.renderItems(),G.renderItems();var K=document.querySelector(".sidebar-total__subtitle"),tt=document.querySelector(".quantity__product"),et=document.querySelector(".basket-list__total"),nt=document.querySelector(".price-no-discount"),ot=document.querySelector(".discount"),it=document.querySelector(".header__icon--span"),rt=document.querySelector(".tabbar__span"),ut=J("basket-list__price_title"),ct=J("basket-list__price_subtitle"),st=J("basket-list__input"),at=ut+ct;K.textContent="".concat(String(ut).replace(/(?=(?:.{3})*$)/g," ")," сом"),tt.textContent="".concat(st," ").concat(function(t){if(t>10&&[11,12,13,14].includes(t%100))return"товаров";var e=t%10;return 1==e?"товар":[2,3,4].includes(e)?"товара":[5,6,7,8,9,0].includes(e)?"товаров":void 0}(st)),et.textContent="".concat(tt.textContent," · ").concat(K.textContent),it.textContent=st,rt.textContent=st,nt.textContent="".concat(String(at).replace(/(?=(?:.{3})*$)/g," ")," сом"),ot.textContent="−".concat(String(ct).replace(/(?=(?:.{3})*$)/g," ")," сом");var lt=document.querySelectorAll(".basket-list__plus"),_t=document.querySelectorAll(".basket-list__minus"),dt=document.querySelectorAll(".checkbox--item"),ht=document.querySelector(".checkbox__all"),mt=document.querySelectorAll(".button__delete"),yt=document.querySelectorAll(".button__delete--sold-out"),pt=document.querySelector(".accordion__title"),ft=document.querySelector(".sidebar-delivery__span");lt.forEach((function(t){return t.addEventListener("click",gt)})),_t.forEach((function(t){return t.addEventListener("click",St)})),dt.forEach((function(t){return t.addEventListener("click",qt)})),mt.forEach((function(t){return t.addEventListener("click",xt)})),ht.addEventListener("click",(function(){var t=document.querySelectorAll(".delivery__photo");!0===ht.checked?t.forEach((function(t){t.classList.add("delivery__photo--visible"),Ct()})):t.forEach((function(t){t.classList.remove("delivery__photo--visible"),Ct()}))})),yt.forEach((function(t){return t.addEventListener("click",kt)}));var bt=document.querySelectorAll(".delivery__flag"),vt=$.length;function kt(){var t="";--vt>10&&[11,12,13,14].includes(vt%100)&&(t="Отсутствуют · ".concat(number," товаров"));var e=vt%10;1==e&&(t="Отсутствует · ".concat(vt," товар")),[2,3,4].includes(e)&&(t="Отсутствуют · ".concat(vt," товара")),[5,6,7,8,9,0].includes(e)&&(t="Отсутствуют · ".concat(vt," товаров")),pt.textContent=t}function gt(t){var e=document.querySelectorAll(".photo-span_".concat(t.target.id)),n=document.querySelector(".basket-list__input_".concat(t.target.id)),o=document.querySelectorAll(".delivery__photo_".concat(t.target.id));2==n.value?(e[e.length-1].classList.toggle("delivery__number--hidden"),e[e.length-1].textContent++):n.value==Number(e[e.length-1].title)+1?(o[t.target.id-1].classList.add("delivery__photo--visible"),o[t.target.id-1].querySelector(".delivery__number").classList.add("photo-span_2"),Ct()):(e[e.length-1].classList.remove("delivery__number--hidden"),e[e.length-1].textContent++)}function St(t){var e=document.querySelectorAll(".photo-span_".concat(t.target.id)),n=document.querySelectorAll(".delivery__photo_".concat(t.target.id));2==e[e.length-1].textContent?(e[e.length-1].classList.add("delivery__number--hidden"),e[e.length-1].textContent--):e[e.length-1].textContent>1?e[e.length-1].textContent--:(n[e.length-1].classList.remove("delivery__photo--visible"),e[e.length-1].classList.remove("photo-span_".concat(t.target.id)),Ct())}function Ct(){document.querySelectorAll(".delivery__date").forEach((function(t){null===t.querySelector(".delivery__photo--visible")?(t.classList.add("delivery__container--hidden"),t.querySelector(".delivery__subtitle").classList.remove("delivery__flag")):(t.querySelector(".delivery__subtitle").classList.add("delivery__flag"),t.classList.remove("delivery__container--hidden"))}))}function qt(t){document.querySelectorAll(".delivery__photo_".concat(t.target.id)).forEach((function(t){t.classList.toggle("delivery__photo--visible"),Ct()}))}function xt(t){document.querySelectorAll(".delivery__photo_".concat(t.target.id)).forEach((function(t){t.remove(),t=null,Ct()}))}var Et=document.querySelector(".basket-list__accordion_btn--sold-out"),wt=document.querySelector(".product-list--sold-out");Et.addEventListener("click",(function(){wt.classList.toggle("product-list--hide"),Et.classList.toggle("basket-list__accordion_btn--open")}));var Lt=document.querySelector(".basket-list__accordion_btn--product"),Pt=document.querySelector(".product-list--product"),Bt=document.querySelector(".container--checkbox"),Dt=document.querySelector(".container--total");Lt.addEventListener("click",(function(){Pt.classList.toggle("product-list--hide"),Lt.classList.toggle("basket-list__accordion_btn--open"),Bt.classList.toggle("basket-list__checkbox--hide"),Dt.classList.toggle("basket-list__checkbox--hide")}));var Nt=document.querySelectorAll(".sidebar-payment__subtitle"),Ot=document.querySelector(".sidebar-payment__subtitle--date"),Tt=document.querySelectorAll(".sidebar-payment__img"),jt=document.querySelectorAll(".edit-payment-btn"),At=new L({popupSelector:".popup_payment",handleFormSubmit:function(t,e,n){Nt.forEach((function(e){e.textContent=t})),Ot.textContent=n,Tt.forEach((function(t){t.src=e})),At.close()}});jt.forEach((function(t){return t.addEventListener("click",(function(){At.open()}))})),At.setEventListeners();var It=document.querySelector(".button--office"),Vt=document.querySelector(".button--my-address"),Rt=document.querySelector(".container__my-address"),Ft=document.querySelector(".container__office");It.addEventListener("click",(function(){It.classList.add("button__delivery--active"),It.disabled=!0,Vt.classList.remove("button__delivery--active"),Vt.disabled=!1,Rt.classList.add("popup__hide-block"),Ft.classList.remove("popup__hide-block")})),Vt.addEventListener("click",(function(){It.classList.remove("button__delivery--active"),It.disabled=!1,Vt.classList.add("button__delivery--active"),Vt.disabled=!0,Rt.classList.remove("popup__hide-block"),Ft.classList.add("popup__hide-block")}));var zt,Wt,Qt=document.querySelectorAll(".edit-delivery-btn"),Mt=document.querySelectorAll(".address-delivery"),Ht=document.querySelector(".delivery-method-sidebar"),$t=document.querySelector(".delivery-method"),Ut=document.querySelector(".delivery-evaluation"),Xt=new A({popupSelector:".popup__delivery",handleFormSubmit:function(t,e,n,o){Mt.forEach((function(e){e.textContent=t})),Ht.textContent="Доставка ".concat(n),$t.textContent=e,Ut.textContent=o,Xt.close()}});Qt.forEach((function(t){return t.addEventListener("click",(function(){Xt.open()}))})),Xt.setEventListeners(),new W({popupForm:".recipient__form",inputErrorClass:"recipient__error",inputErrorActive:"recipient__input-error_active",formInput:".recipient__input",formSubmit:".button__sidebar-confirmation"},document.forms.recipient__form).enableValidation(),zt=bt[0].textContent.split(" ")[0],Wt=bt[bt.length-1].textContent.split(" ")[0]+" "+bt[bt.length-1].textContent.split(" ")[1].substr(0,3),ft.textContent=zt+"-"+Wt,[].forEach.call(document.querySelectorAll(".tel"),(function(t){var e;function n(t){t.key&&(e=t.key),this.selectionStart<1&&t.preventDefault();var n="+_ ___ ___ __ __",o=0,i=(n.replace(/\D/g,""),this.value.replace(/\D/g,"")),r=n.replace(/[_\d]/g,(function(t){return o<i.length?i.charAt(o++):t}));-1!=(o=r.indexOf("_"))&&(o<1&&(o=2),r=r.slice(0,o));var u=n.substr(0,this.value.length).replace(/_+/g,(function(t){return"\\d{1,"+t.length+"}"})).replace(/[+()]/g,"\\$&");(!(u=new RegExp("^"+u+"$")).test(this.value)||this.value.length<2||e>47&&e<58)&&(this.value=r),"blur"==t.type&&this.value.length<2&&(this.value="")}t.addEventListener("input",n,!1),t.addEventListener("focus",n,!1),t.addEventListener("blur",n,!1),t.addEventListener("key",n,!1)}))})();